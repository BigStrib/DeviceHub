<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>DeviceHub - Multi Device Video Wall</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Font Awesome Icons -->
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        referrerpolicy="no-referrer"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
<div id="app">
    <!-- LOGIN SCREEN -->
    <section id="login-screen" class="screen login-screen">
        <div class="login-card">
            <div class="login-header">
                <div class="login-logo">
                    <i class="fas fa-broadcast-tower"></i>
                </div>
                <h1>DeviceHub</h1>
                <p>Host controls the wall. Other devices submit cameras.</p>
            </div>

            <div class="login-body">
                <!-- Host Column -->
                <div class="login-col">
                    <h2>Host</h2>
                    <p>On your main PC, create a room and control all sources.</p>

                    <label class="login-label">Room Code</label>
                    <div class="login-input-row">
                        <input
                            id="host-room-input"
                            class="login-input"
                            type="text"
                            placeholder="ABC-123"
                            maxlength="7"
                            autocomplete="off"
                        />
                        <button id="gen-room-btn" class="login-gen-btn" title="Generate Room Code">
                            <i class="fas fa-sync"></i>
                        </button>
                    </div>

                    <button id="start-host-btn" class="login-btn primary">
                        <i class="fas fa-play"></i>
                        Start Session
                    </button>
                </div>

                <div class="login-divider">or</div>

                <!-- Guest Column -->
                <div class="login-col">
                    <h2>Join</h2>
                    <p>On your phone or laptop, join the room and share your camera or screen.</p>

                    <label class="login-label">Room Code</label>
                    <input
                        id="guest-room-input"
                        class="login-input"
                        type="text"
                        placeholder="ABC-123"
                        maxlength="7"
                        autocomplete="off"
                    />

                    <button id="join-guest-btn" class="login-btn secondary">
                        <i class="fas fa-sign-in-alt"></i>
                        Join Room
                    </button>
                </div>
            </div>

            <div id="login-error" class="login-error"></div>
        </div>
    </section>

    <!-- HOST SCREEN (blank canvas with tiles) -->
    <section id="host-screen" class="screen host-screen hidden">
        <main class="host-main">
            <div id="canvas" class="canvas"></div>
        </main>

        <!-- Bottom Toolbar -->
        <footer id="toolbar" class="toolbar">
            <div class="toolbar-left">
                <button id="open-host-panel-btn" class="toolbar-btn">
                    <i class="fas fa-list"></i>
                    <span>Sources</span>
                </button>
            </div>
            <div class="toolbar-center">
                <button id="host-add-camera-btn" class="toolbar-btn">
                    <i class="fas fa-video"></i>
                    <span>My Camera</span>
                </button>
                <button id="host-add-window-btn" class="toolbar-btn">
                    <i class="fas fa-window-maximize"></i>
                    <span>My Window</span>
                </button>
            </div>
            <div class="toolbar-right">
                <button id="host-settings-btn" class="toolbar-btn">
                    <i class="fas fa-sliders-h"></i>
                    <span>Settings</span>
                </button>
                <button id="host-fullscreen-btn" class="toolbar-btn">
                    <i class="fas fa-expand"></i>
                    <span>Fullscreen</span>
                </button>
                <button id="host-end-btn" class="toolbar-btn danger">
                    <i class="fas fa-power-off"></i>
                    <span>End</span>
                </button>
            </div>
        </footer>

        <!-- HOST PANEL: Sources & Devices -->
        <aside id="host-panel" class="host-panel hidden">
            <div class="panel-header">
                <h3>
                    <i class="fas fa-tv"></i>
                    Sources & Devices
                </h3>
                <button id="host-panel-close" class="icon-btn small">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="panel-tabs">
                <button class="panel-tab active" data-tab="sources">
                    Sources <span id="sources-badge" class="badge">0</span>
                </button>
                <button class="panel-tab" data-tab="devices">
                    Devices <span id="devices-badge" class="badge">0</span>
                </button>
            </div>
            <div class="panel-body">
                <div id="tab-sources" class="tab-content active"></div>
                <div id="tab-devices" class="tab-content"></div>
            </div>
        </aside>

        <!-- SETTINGS PANEL (room code in settings) -->
        <aside id="settings-panel" class="settings-panel hidden">
            <div class="settings-header">
                <h3><i class="fas fa-sliders-h"></i> Settings</h3>
                <button id="settings-close-btn" class="icon-btn small">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="settings-body">
                <div class="settings-group">
                    <h4>Display</h4>
                    <div class="settings-row">
                        <span>Show borders</span>
                        <label class="switch">
                            <input type="checkbox" id="set-show-borders" checked />
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-row">
                        <span>Show labels</span>
                        <label class="switch">
                            <input type="checkbox" id="set-show-labels" checked />
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="settings-row">
                        <span>Rounded corners</span>
                        <label class="switch">
                            <input type="checkbox" id="set-rounded-corners" checked />
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-group">
                    <h4>Behavior</h4>
                    <div class="settings-row">
                        <span>Lock aspect ratio</span>
                        <label class="switch">
                            <input type="checkbox" id="set-lock-ratio" checked />
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="settings-group">
                    <h4>Canvas</h4>
                    <div class="settings-row">
                        <span>Background color</span>
                        <input type="color" id="set-bg-color" />
                    </div>
                </div>

                <!-- Room code here -->
                <div class="settings-group">
                    <h4>Session</h4>
                    <div class="settings-row room-code-row">
                        <span>Room code</span>
                        <div class="room-code-display">
                            <span id="host-room-display" class="guest-room-id">---</span>
                            <button id="copy-room-btn" class="icon-btn small" title="Copy room code">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </section>

    <!-- GUEST SCREEN -->
    <section id="guest-screen" class="screen guest-screen hidden">
        <div class="guest-card">
            <div class="guest-header">
                <h2>Connected to Room</h2>
                <p>Your camera or screen goes only to the host. You can see what you share here.</p>
                <div class="guest-room-info">
                    <i class="fas fa-check-circle"></i>
                    <span>Room:</span>
                    <span id="guest-room-code" class="guest-room-id">---</span>
                </div>
            </div>
            <div class="guest-body">
                <div id="guest-status" class="guest-status">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>Connecting to host...</span>
                </div>
                <div id="guest-controls" class="guest-controls hidden">
                    <div class="guest-options">
                        <button id="share-camera-btn" class="guest-option-btn">
                            <i class="fas fa-video"></i>
                            <span>Front Camera</span>
                        </button>
                        <button id="share-window-btn" class="guest-option-btn">
                            <i class="fas fa-camera-rotate"></i>
                            <span>Back Camera</span>
                        </button>
                        <button id="share-screen-btn" class="guest-option-btn">
                            <i class="fas fa-desktop"></i>
                            <span>Share Screen</span>
                        </button>
                    </div>

                    <div id="guest-my-sources" class="guest-my-sources"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Toasts -->
    <div id="toast-container" class="toast-container"></div>
</div>

<!-- PeerJS (signaling) -->
<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
<!-- App Logic -->
<script src="app.js"></script>
</body>
</html>